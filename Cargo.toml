[package]
name = "caretta-sync"
edition.workspace = true
version.workspace = true
description.workspace = true
license.workspace = true
repository.workspace = true

[features]
default = ["macros"]
bevy = ["dep:caretta-sync-bevy"]
mobile = ["dep:caretta-sync-mobile"]
cli = ["dep:caretta-sync-cli"]
desktop = ["cli", "bevy"]
macros = ["dep:caretta-sync-macros"]
test = ["caretta-sync-core/test"]

[dependencies]
caretta-sync-bevy = { path = "bevy", optional = true }
caretta-sync-core.workspace = true
caretta-sync-cli = { path="cli", optional = true }
caretta-sync-mobile = { path = "mobile", optional = true }
caretta-sync-macros = { path="macros", optional = true}

[dev-dependencies]
caretta-sync-core = {workspace = true, features = ["test"]}

[workspace]
members = [ ".", "core", "macros", "cli", "mobile", "examples/*" , "bevy"]
resolver = "3"

[workspace.package]
edition = "2024"
version = "0.1.0"
description = "A local-first application framework for lazy person"
license = "MIT OR Apache-2.0"
repository = "https://forgejo.fireturlte.net/lazy-supplements" 

[workspace.dependencies]
bevy = { git = "https://github.com/bevyengine/bevy.git", rev="16ffdaea0daec11e4347d965f56c9c8e1122a488"  }
chrono = "0.4.41"
ciborium = "0.2.2"
clap = { version = "4.5.38", features = ["derive"] }
caretta-sync-core.path = "core"
futures = { version = "0.3.31", features = ["executor"] }
libp2p = { version = "0.55.0", features = ["macros", "mdns", "noise", "ping", "tcp", "tokio", "yamux" ] }
serde = { version = "1.0.219", features = ["derive"] }
thiserror = "2.0.12"
tokio = { version = "1.45.0", features = ["macros", "rt", "rt-multi-thread"] }
tonic = "0.14.0"
url = { version = "2.5.7", features = ["serde"] }
uuid = { version = "1.17.0", features = ["v7"] }

[profile.dev]
opt-level = 1

[profile.dev.package."*"]
opt-level = 3

[profile.release]
codegen-units = 1
lto = "thin"
